<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.3CR3//EN"
"http://www.oasis-open.org/docbook/xml/4.3CR3/docbookx.dtd">
<book lang="en">
  <bookinfo>
    <title>OTHERobjects CMS</title>

    <subtitle>Hosting Guide</subtitle>

    <releaseinfo>0.3</releaseinfo>
  </bookinfo>

  <toc></toc>

  <preface id="preface">
    <title>Preface</title>

    <para>This guide explains the various options for hosting your
    OTHERobjects powered site and making it highly available. It assumes a
    good level of system administartion experience.</para>

    <para>The standard installation will be fine for small and medium sized
    sites but large or transaction sites will need more advanced hosting
    options descripbed in this guide.</para>
  </preface>

  <chapter>
    <title>Scaling</title>

    <para>What needs to scale JCR JDBC Lucene Filestore Sessions Scheduler
    Hibernate Cache Options App: shared JVM, dedicated JVM, clustered JVM
    Static: embedded, dedicated, clustered Database: embedded, dedicated,
    clustered JCR: embedded, (dedicated?), clustered Need recommended: App
    server: Jetty, Glassfish JVM clusterer: Terracotta, Glassfish
    LoadBalanacer: LVS, balance?, Glassfish Database: H2, Postgres, MySQL?
    JCR: Jackrabbit, Alfresco Deployment models Model 1: Small sites (eg
    Company website) * Single JVM: Embedded JCR, Embedded DB, Embedded Static
    * One process. Dead easy to configure * Nightly backups to shared or
    network drive * Optional Apache frontend forextra config Model 2: Medium
    size sites, critical data (eg Medium sized e-commerce) * Critical
    transactional data in dedicated DB with hot backup Model 3: HA sites *
    Clustered JVM, Clustered JCR, Clusetered Static, Clustered Database
    </para>
  </chapter>

  <chapter>
    <title>Clustering</title>

    <para>Clustering involves running the application on more than one
    server.</para>

    <section>
      <title>Potential pitfalls</title>

      <para>Stale objects on nodes.</para>

      <para>Scheduler running same task simultaneously on each node.</para>
    </section>

    <section>
      <title>Terracootta</title>

      <para>Setting up a clustered OTHERobjects site with Terracotta</para>

      <para>#) Download terracotta 2.4 </para>

      <para>#) Start terracotta server (which coordinates the distribution of
      shared objects) with default config (to change the log and data paths
      copy sample/tc-config.xml to the directory from where you start tc and
      customise). ./bin/start-tc-server.sh</para>

      <para>#) Modify OO sample tc-config.xml file making sure to get
      jee-application name right. </para>

      <para>#) Build site war file and copy to tomcat/webapps </para>

      <para>#) Start a Tomcat instance using Terracotta using our
      start-tc-tomcat script. </para>

      <para>HA Terracotta Servers</para>

      <para>http://www.terracotta.org/confluence/display/docs1/Terracotta+Server+Cluster
      With Jetty </para>

      <para>http://docs.codehaus.org/display/JETTY/Session+Clustering+with+Terracotta</para>

      <para>http://www.nabble.com/Load-Balancing%5CClustering-in-6.14-tf3945950.html#a11312269</para>

      <para>http://www.terracotta.org/confluence/display/docs1/Setting+Up+a+Tomcat+Web+Cluster
      </para>
    </section>
  </chapter>

  <chapter>
    <title>Databases</title>

    <para></para>
  </chapter>

  <chapter>
    <title>Java Content Repository</title>

    <para></para>
  </chapter>

  <chapter>
    <title>Static content</title>

    <para>* eTags * Expries headers * GZip</para>
  </chapter>

  <chapter>
    <title>Monitoring availability</title>

    <para></para>
  </chapter>

  <chapter>
    <title>Load balancers</title>

    <para>http://www.inlab.de/balance.html LVS </para>
  </chapter>

  <chapter>
    <title>System configuration</title>

    <para>System java settings.</para>
  </chapter>

  <chapter>
    <title>Performance testing</title>

    <para>http://www.lighttpd.net/benchmark</para>

    <para>Jmeter</para>

    <para>That tails one based on httperf</para>
  </chapter>
</book>