##
## Velcoity macros used by the OTHERobjects.
##

#macro(ooLayoutBlock $blockCode)
  #parse("/site.resources/templates/blocks/$blockCode")
#end

#macro(ooLayoutRegion $regionCode)
  #foreach($region in $template.regions)
    #if($region.code == $regionCode)
      #foreach($block in $region.blocks)
		#ooLayoutBlock($block.code)
      #end
    #end
  #end
#end


#macro(ooToolbar)



<style>
#OoToolbar {position:fixed;bottom:0px; width:30px; height:30px; color:white; background:#000000; opacity:0.75; font:80% Arial;}
#OoToolbar A {color:white;}
#OoToolbar .logo {float:left; width:30px; height:30px; background:#FFFFFF url('/resources/otherobjects.resources/static/graphics/favicon.ico') no-repeat 7px 7px; opacity:1.0;}
#OoToolbar .info-false {float:left; padding:7px 0px 5px 25px; background:url('/resources/otherobjects.resources/static/icons/bullet-red.png') no-repeat 7px 7px;}
#OoToolbar .info-true {float:left; padding:7px 0px 5px 25px; background:url('/resources/otherobjects.resources/static/icons/bullet-green.png') no-repeat 7px 7px;}

.head {}
.head-bg {background:#660000; opacity:0.8; position:fixed; width:100%; height:90px;color:white;padding:10px;top:-150px;}
.head {font:90% Arial; position:fixed; width:100%; height:100px;color:white;padding:10px;top:-150px;}
.head P {float:left; clear:both; padding-bottom:5px;}
.head STRONG {font-weight:bold; width:100px; float:left;}

.info {}
.info-bg {background:#000066; opacity:0.8; position:fixed; width:100%; height:430px;color:white;padding:10px;top:-500px;}
.info {font:80% Arial; position:fixed; width:700px;color:white;padding:10px;top:-500px;}
.info H1 {font:bold 120% Arial;padding-top:10px;}
.info STRONG {font-weight:bold;}
</style>

<div id="InfoBg" class="info-bg"></div>
<div id="Info" class="info">
<h1>Objects in context</h1>
$ctxInfo.describeContext()
<h1>CmsImageTool methods</h1>
$ctxInfo.describeTool("cmsImageTool")
<h1>NumberTool methods</h1>
$ctxInfo.describeTool("numberTool")
</div>

<div id="HeadBg" class="head-bg"></div>
<div id="Head" class="head">
<p><strong>Title:</strong> $!title</p>
<p><strong>Keywords:</strong> $!keywords</p>
<p><strong>Description:</strong> $!description</p>
<p><strong>Creator:</strong> $!creator</p>
</div>

<div id="OoToolbar">
<p id="ooLogo" class="logo"></p>
<p class="info-$resourceObject.published">$resourceObject.typeDef.label: $resourceObject.label &nbsp;&nbsp;
| &nbsp;&nbsp;<a href="#" id="ooHeadLink">Show meta data</a> &nbsp;&nbsp;
| &nbsp;&nbsp;<a href="#" id="ooInfoLink">Show context data</a> &nbsp;&nbsp;
</div>
<script type="text/javascript" src="/resources/otherobjects.resources/static/extjs/src/ext-base.js"></script>
<script type="text/javascript" src="/resources/otherobjects.resources/static/extjs/src/ext-all.js"></script>

<script>
var expanded = false;
function init() {
	Ext.get('ooHeadLink').on('click', function() {
		Ext.get("Head").animate({"top":{ to:'0' }},0.5);
		Ext.get("HeadBg").animate({"top":{ to:'0' }},0.5);
	});
	Ext.get("Head").on("click", function() {
		Ext.get("Head").animate({"top":{ to:'-150' }},0.5);
		Ext.get("HeadBg").animate({"top":{ to:'-150' }},0.5);
	});
	Ext.get('ooInfoLink').on('click', function() {
		Ext.get("Info").animate({"top":{ to:'0' }},1);
		Ext.get("InfoBg").animate({"top":{ to:'0' }},1);
	});
	Ext.get("Info").on("click", function() {
		Ext.get("Info").animate({"top":{ to:'-500' }},1);
		Ext.get("InfoBg").animate({"top":{ to:'-500' }},1);
	});	
	Ext.get('ooLogo').on('dblclick', function() {
		window.location='/go/workbench/';
	});
	Ext.get('ooLogo').on('click', function() {
		if(expanded) {
			Ext.get('OoToolbar').animate({width:{ to:'0' }},0.5);
			expanded = false;
		}	
		else {
			Ext.get('OoToolbar').animate({width:{ to:'1500' }},0.5);
			expanded = true;
		}
	});
}
Ext.onReady(init);
</script>
#end
